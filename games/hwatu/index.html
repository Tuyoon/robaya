<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../../css/style.css">
  <script src="locales/translations.js"></script>
  <script src="../../js/lang.js"></script>
  <script src="../../js/theme.js"></script>
  <script src="../../js/cookie-consent.js"></script>
  <script src="../../js/screenshot-gallery.js"></script>
  <title data-i18n="hwatuPageTitle">Hwatu — Korean Card Game</title>
</head>
<body>
  <div class="lang-switch">
      <a href="#" data-lang="en">🇺🇸 EN</a>
      <a href="#" data-lang="ru">🇷🇺 RU</a>
  </div>

  <a href="../../index.html" class="home-button">
    <span class="home-icon">🏠</span>
    <span data-i18n="home">Home</span>
  </a>

  <div class="container">
    <header class="game-hero">
      <div class="game-icon-large">
        <img src="AppIcon.png" alt="Hwatu App Icon">
      </div>
      <h1 data-i18n="hwatuTitle">Hwatu</h1>
      <p class="game-subtitle" data-i18n="hwatuSubtitle">Classic Korean card game</p>
      <a href="https://apps.apple.com/app/id6563145829" class="download-btn-large" target="_blank" rel="noopener">
        <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on App Store" height="50">
      </a>
    </header>
    
    <section class="game-description">
      <h2 data-i18n="hwatuDescriptionTitle">About Hwatu</h2>
      <p data-i18n="hwatuDescription">Experience the rich tradition of Korean card gaming with Hwatu! This classic card game, whose name translates to "Battle of Flowers," has been played for centuries and remains a beloved pastime in Korea. With beautifully designed cards featuring traditional Korean symbols and flowers, Hwatu combines strategy, luck, and cultural heritage in an engaging gameplay experience.</p>
    </section>

    <section class="game-features">
      <h2 data-i18n="hwatuFeaturesTitle">Game Features</h2>
      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-icon">🃏</div>
          <h3 data-i18n="hwatuFeature1Title">Traditional Cards</h3>
          <p data-i18n="hwatuFeature1Desc">Beautiful authentic Korean Hwatu card designs</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🎯</div>
          <h3 data-i18n="hwatuFeature2Title">Multiple Game Modes</h3>
          <p data-i18n="hwatuFeature2Desc">Play different variations of the classic game</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🧠</div>
          <h3 data-i18n="hwatuFeature3Title">Strategy & Luck</h3>
          <p data-i18n="hwatuFeature3Desc">Balance between tactical thinking and chance</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🌏</div>
          <h3 data-i18n="hwatuFeature4Title">Cultural Experience</h3>
          <p data-i18n="hwatuFeature4Desc">Learn about Korean culture and traditions</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">📱</div>
          <h3 data-i18n="hwatuFeature5Title">Mobile Optimized</h3>
          <p data-i18n="hwatuFeature5Desc">Perfect for playing on any mobile device</p>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🏆</div>
          <h3 data-i18n="hwatuFeature6Title">Achievements</h3>
          <p data-i18n="hwatuFeature6Desc">Unlock achievements as you master the game</p>
        </div>
      </div>
    </section>

    <section class="game-benefits">
      <h2 data-i18n="hwatuBenefitsTitle">Why Play Hwatu?</h2>
      <p data-i18n="hwatuBenefitsSubtitle">Discover the benefits of this traditional game:</p>
      <div class="benefits-list">
        <div class="benefit-item">
          <span class="benefit-icon">🧠</span>
          <span data-i18n="hwatuBenefit1">Improves strategic thinking and decision-making skills</span>
        </div>
        <div class="benefit-item">
          <span class="benefit-icon">🌏</span>
          <span data-i18n="hwatuBenefit2">Learn about Korean culture and traditions</span>
        </div>
        <div class="benefit-item">
          <span class="benefit-icon">😌</span>
          <span data-i18n="hwatuBenefit3">Provides relaxing entertainment and stress relief</span>
        </div>
        <div class="benefit-item">
          <span class="benefit-icon">👥</span>
          <span data-i18n="hwatuBenefit4">Great for social gaming with friends and family</span>
        </div>
        <div class="benefit-item">
          <span class="benefit-icon">⏰</span>
          <span data-i18n="hwatuBenefit5">Quick games perfect for short breaks</span>
        </div>
      </div>
    </section>

    <!-- Video Preview Section -->
    <section class="game-video">
      <h2 data-i18n="hwatuVideoTitle">Watch Hwatu in Action</h2>
      <div class="video-container">
        <video id="hwatuVideo" controls poster="screenshots/0x0ss.png">
          <source src="https://apptrailers.itunes.apple.com/itunes-assets/PurpleVideo221/v4/dc/fd/9b/dcfd9b67-c9ad-aeb1-a5f7-8136a778448c/P1127925025_default.m3u8" type="application/x-mpegURL">
          <p data-i18n="videoNotSupported">Your browser does not support the video tag.</p>
        </video>
      </div>
    </section>

    <!-- Screenshots Section -->
    <section class="game-screenshots">
      <h2 data-i18n="hwatuScreenshotsTitle">Game Screenshots</h2>
      <div class="screenshots-grid" data-gallery="screenshots/" data-pattern="0x0ss" data-count="9"></div>
    </section>

    <section class="download-section">
      <h2 data-i18n="downloadTitle">Download Now</h2>
      <p data-i18n="downloadDesc">Hwatu is now available! Download and play your favorite game anytime</p>
      
      <a href="https://apps.apple.com/app/id6563145829" class="download-btn-large" target="_blank" rel="noopener">
        <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on App Store" height="50">
      </a>
    </section>
    
    <footer class="game-footer">
      <div class="game-links">
        <a href="privacy.html" data-i18n="privacy">Privacy Policy</a>
        <a href="terms.html" data-i18n="terms">Terms of Use</a>
        <a href="mailto:rtat.store@gmail.com" data-i18n="email">rtat.store@gmail.com</a>
      </div>
    </footer>
  </div>

  <script>
    // HLS Video Support
    
    let currentImageIndex = 0;
    const imagesArray = Array.from(screenshotItems);

    // Set total count
    lightboxTotal.textContent = imagesArray.length;

    screenshotItems.forEach((img, index) => {
      img.addEventListener('click', (e) => {
        currentImageIndex = index;
        updateLightbox();
        lightbox.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
    });

    function updateLightbox() {
      lightboxImg.src = imagesArray[currentImageIndex].src;
      lightboxCurrent.textContent = currentImageIndex + 1;
    }

    function showNextImage() {
      currentImageIndex = (currentImageIndex + 1) % imagesArray.length;
      updateLightbox();
    }

    function showPrevImage() {
      currentImageIndex = (currentImageIndex - 1 + imagesArray.length) % imagesArray.length;
      updateLightbox();
    }

    function closeLightbox() {
      lightbox.classList.remove('active');
      document.body.style.overflow = '';
    }

    lightboxClose.addEventListener('click', closeLightbox);
    lightboxPrev.addEventListener('click', (e) => {
      e.stopPropagation();
      showPrevImage();
    });
    lightboxNext.addEventListener('click', (e) => {
      e.stopPropagation();
      showNextImage();
    });
    
    lightbox.addEventListener('click', (e) => {
      if (e.target === lightbox) {
        closeLightbox();
      }
    });

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (!lightbox.classList.contains('active')) return;
      
      if (e.key === 'Escape') {
        closeLightbox();
      } else if (e.key === 'ArrowLeft') {
        showPrevImage();
      } else if (e.key === 'ArrowRight') {
        showNextImage();
      }
    });

    // Screenshot Carousel
    const carousel = document.querySelector('.screenshots-carousel');
    const carouselPrev = document.getElementById('carouselPrev');
    const carouselNext = document.getElementById('carouselNext');
    
    if (carousel && carouselPrev && carouselNext) {
      let currentIndex = 0;
      const scrollAmount = 300;
      
      function updateCarouselButtons() {
        carouselPrev.disabled = false;
        carouselNext.disabled = false;
      }
      
      function scrollCarousel(direction) {
        const itemWidth = carousel.querySelector('.screenshot-item').offsetWidth + 16; // width + gap
        currentIndex += direction;
        
        // Smooth scroll to position
        carousel.scrollTo({
          left: currentIndex * itemWidth,
          behavior: 'smooth'
        });
        
        updateCarouselButtons();
      }
      
      carouselPrev.addEventListener('click', () => scrollCarousel(-1));
      carouselNext.addEventListener('click', () => scrollCarousel(1));
      
      // Scroll with touch/mouse drag
      let isDown = false;
      let startX;
      let scrollLeft;
      
      carousel.addEventListener('mousedown', (e) => {
        isDown = true;
        startX = e.pageX - carousel.offsetLeft;
        scrollLeft = carousel.scrollLeft;
      });
      
      carousel.addEventListener('mouseleave', () => {
        isDown = false;
      });
      
      carousel.addEventListener('mouseup', () => {
        isDown = false;
      });
      
      carousel.addEventListener('mousemove', (e) => {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX - carousel.offsetLeft;
        const walk = (x - startX) * 2;
        carousel.scrollLeft = scrollLeft - walk;
      });
    }

    // HLS Video Support
    if (document.getElementById('hwatuVideo')) {
      const video = document.getElementById('hwatuVideo');
      if (video.canPlayType('application/vnd.apple.mpegurl')) {
        // Native HLS support (Safari)
        console.log('✅ Native HLS support detected');
      } else {
        // Load hls.js for other browsers
        const script = document.createElement('script');
        script.src = 'https://cdn.jsdelivr.net/npm/hls.js@latest';
        script.onload = function() {
          if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(video.querySelector('source').src);
            hls.attachMedia(video);
            console.log('✅ HLS.js loaded and attached');
          }
        };
        document.head.appendChild(script);
      }
    }
  </script>
</body>
</html>
